<?xml version="1.0" ?>

<!--                 spawn.launch               -->
<!-- This documnent describes the gazebo launch -->
<!--     Machenical Practice Testing Version    -->
<!--          Last editted: 11/01, 2018         -->
<!--              Editor: Wolf Chen             -->

<launch>
  
  <!-- Open gazebo -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch"/>

  <group ns="/arm">

    <!-- Robot model -->
    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find arm_description)/urdf/arm.xacro'"/>
    <arg name="x" default="0"/>
    <arg name="y" default="0"/>
    <arg name="z" default="0"/>

    <!-- Spawn the robot model -->
    <node name="arm_spawn" pkg="gazebo_ros" type="spawn_model" output="screen"
        args="-urdf -param robot_description -model arm -x $(arg x) -y $(arg y) -z $(arg z)"/>

    <!-- Load controlles -->
    <rosparam command="load" file="$(find arm_moveit_config)/config/joints.yaml" />

    <!-- Controllers -->
    <node name="controller_spawner" pkg="controller_manager" type="spawner"
          respawn="false" output="screen" ns ="/arm"
          args="--namespace=/arm
          joint_state_controller
          ground_position_controller
          base_position_controller
          arm_position_controller
          head_position_controller
          --timeout 60">
    </node>

    <!-- rqt -->
    <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure"/>
    <node name="rqt_publisher" pkg="rqt_publisher" type="rqt_publisher"/>

  </group>

</launch>
